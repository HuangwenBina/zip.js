!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(t){return class{constructor(e){const n=t=>{if(this.callbacks)if(this.pendingData){const e=t;(t=new new Uint8Array(this.pendingData.length+t.length)).set(this.pendingData,0),t.set(e,this.pendingData.length),this.callbacks.resolve(t)}else this.callbacks.resolve(new Uint8Array(t));else this.pendingData=new Uint8Array(t)};if(this.deflater=new t,"function"==typeof this.deflater.onData)this.deflater.onData=n;else if("function"==typeof this.deflater.on)this.deflater.on("data",n);else{if(!e.registerCallbackFunction)throw new Error("Cannot register the callback function.");e.registerCallbackFunction(this.deflater,n)}}async append(t){return this.deflater.push(t),e(this)}async flush(){return this.deflater.push(new Uint8Array([]),!0),e(this)}};function e(t){if(t.pendingData){const e=t.pendingData;return t.pendingData=null,e}return new Uint8Array(0)}}const{ZipDeflater:e,ZipInflater:n}={ZipDeflater:t((a=zlib).Deflate),ZipInflater:t(a.Inflate)};var a;self.ZipDeflater=e,self.ZipInflater=n}));
