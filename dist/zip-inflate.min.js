!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).zip={})}(this,(function(e){"use strict";const t=-2,n=-3,i=-5,r=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],a=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],s=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u=15;function f(){let e,t,r,a,s,f;function h(e,t,o,l,d,c,h,w,_,p,b){let g,y,x,m,E,k,A,v,U,R,D,F,S,I,L;R=0,E=o;do{r[e[t+R]]++,R++,E--}while(0!==E);if(r[0]==o)return h[0]=-1,w[0]=0,0;for(v=w[0],k=1;k<=u&&0===r[k];k++);for(A=k,v<k&&(v=k),E=u;0!==E&&0===r[E];E--);for(x=E,v>E&&(v=E),w[0]=v,I=1<<k;k<E;k++,I<<=1)if((I-=r[k])<0)return n;if((I-=r[E])<0)return n;for(r[E]+=I,f[1]=k=0,R=1,S=2;0!=--E;)f[S]=k+=r[R],S++,R++;E=0,R=0;do{0!==(k=e[t+R])&&(b[f[k]++]=E),R++}while(++E<o);for(o=f[x],f[0]=E=0,R=0,m=-1,F=-v,s[0]=0,D=0,L=0;A<=x;A++)for(g=r[A];0!=g--;){for(;A>F+v;){if(m++,F+=v,L=x-F,L=L>v?v:L,(y=1<<(k=A-F))>g+1&&(y-=g+1,S=A,k<L))for(;++k<L&&!((y<<=1)<=r[++S]);)y-=r[S];if(L=1<<k,p[0]+L>1440)return n;s[m]=D=p[0],p[0]+=L,0!==m?(f[m]=E,a[0]=k,a[1]=v,k=E>>>F-v,a[2]=D-s[m-1]-k,_.set(a,3*(s[m-1]+k))):h[0]=D}for(a[1]=A-F,R>=o?a[0]=192:b[R]<l?(a[0]=b[R]<256?0:96,a[2]=b[R++]):(a[0]=c[b[R]-l]+16+64,a[2]=d[b[R++]-l]),y=1<<A-F,k=E>>>F;k<L;k+=y)_.set(a,3*(D+k));for(k=1<<A-1;0!=(E&k);k>>>=1)E^=k;for(E^=k,U=(1<<F)-1;(E&U)!=f[m];)m--,F-=v,U=(1<<F)-1}return 0!==I&&1!=x?i:0}function w(n){let i;for(e||(e=[],t=[],r=new Int32Array(16),a=[],s=new Int32Array(u),f=new Int32Array(16)),t.length<n&&(t=[]),i=0;i<n;i++)t[i]=0;for(i=0;i<16;i++)r[i]=0;for(i=0;i<3;i++)a[i]=0;s.set(r.subarray(0,u),0),f.set(r.subarray(0,16),0)}this.inflate_trees_bits=function(r,a,s,o,l){let d;return w(19),e[0]=0,d=h(r,0,19,19,null,null,s,a,o,e,t),d==n?l.msg="oversubscribed dynamic bit lengths tree":d!=i&&0!==a[0]||(l.msg="incomplete dynamic bit lengths tree",d=n),d},this.inflate_trees_dynamic=function(r,a,s,u,f,_,p,b,g){let y;return w(288),e[0]=0,y=h(s,0,r,257,o,l,_,u,b,e,t),0!=y||0===u[0]?(y==n?g.msg="oversubscribed literal/length tree":-4!=y&&(g.msg="incomplete literal/length tree",y=n),y):(w(288),y=h(s,r,a,0,d,c,p,f,b,e,t),0!=y||0===f[0]&&r>257?(y==n?g.msg="oversubscribed distance tree":y==i?(g.msg="incomplete distance tree",y=n):-4!=y&&(g.msg="empty distance tree with lengths",y=n),y):0)}}f.inflate_trees_fixed=function(e,t,n,i){return e[0]=9,t[0]=5,n[0]=a,i[0]=s,0};function h(){const e=this;let i,a,s,o,l=0,d=0,c=0,u=0,f=0,h=0,w=0,_=0,p=0,b=0;function g(e,t,i,a,s,o,l,d){let c,u,f,h,w,_,p,b,g,y,x,m,E,k,A,v;p=d.next_in_index,b=d.avail_in,w=l.bitb,_=l.bitk,g=l.write,y=g<l.read?l.read-g-1:l.end-g,x=r[e],m=r[t];do{for(;_<20;)b--,w|=(255&d.read_byte(p++))<<_,_+=8;if(c=w&x,u=i,f=a,v=3*(f+c),0!==(h=u[v]))for(;;){if(w>>=u[v+1],_-=u[v+1],0!=(16&h)){for(h&=15,E=u[v+2]+(w&r[h]),w>>=h,_-=h;_<15;)b--,w|=(255&d.read_byte(p++))<<_,_+=8;for(c=w&m,u=s,f=o,v=3*(f+c),h=u[v];;){if(w>>=u[v+1],_-=u[v+1],0!=(16&h)){for(h&=15;_<h;)b--,w|=(255&d.read_byte(p++))<<_,_+=8;if(k=u[v+2]+(w&r[h]),w>>=h,_-=h,y-=E,g>=k)A=g-k,g-A>0&&2>g-A?(l.window[g++]=l.window[A++],l.window[g++]=l.window[A++],E-=2):(l.window.set(l.window.subarray(A,A+2),g),g+=2,A+=2,E-=2);else{A=g-k;do{A+=l.end}while(A<0);if(h=l.end-A,E>h){if(E-=h,g-A>0&&h>g-A)do{l.window[g++]=l.window[A++]}while(0!=--h);else l.window.set(l.window.subarray(A,A+h),g),g+=h,A+=h,h=0;A=0}}if(g-A>0&&E>g-A)do{l.window[g++]=l.window[A++]}while(0!=--E);else l.window.set(l.window.subarray(A,A+E),g),g+=E,A+=E,E=0;break}if(0!=(64&h))return d.msg="invalid distance code",E=d.avail_in-b,E=_>>3<E?_>>3:E,b+=E,p-=E,_-=E<<3,l.bitb=w,l.bitk=_,d.avail_in=b,d.total_in+=p-d.next_in_index,d.next_in_index=p,l.write=g,n;c+=u[v+2],c+=w&r[h],v=3*(f+c),h=u[v]}break}if(0!=(64&h))return 0!=(32&h)?(E=d.avail_in-b,E=_>>3<E?_>>3:E,b+=E,p-=E,_-=E<<3,l.bitb=w,l.bitk=_,d.avail_in=b,d.total_in+=p-d.next_in_index,d.next_in_index=p,l.write=g,1):(d.msg="invalid literal/length code",E=d.avail_in-b,E=_>>3<E?_>>3:E,b+=E,p-=E,_-=E<<3,l.bitb=w,l.bitk=_,d.avail_in=b,d.total_in+=p-d.next_in_index,d.next_in_index=p,l.write=g,n);if(c+=u[v+2],c+=w&r[h],v=3*(f+c),0===(h=u[v])){w>>=u[v+1],_-=u[v+1],l.window[g++]=u[v+2],y--;break}}else w>>=u[v+1],_-=u[v+1],l.window[g++]=u[v+2],y--}while(y>=258&&b>=10);return E=d.avail_in-b,E=_>>3<E?_>>3:E,b+=E,p-=E,_-=E<<3,l.bitb=w,l.bitk=_,d.avail_in=b,d.total_in+=p-d.next_in_index,d.next_in_index=p,l.write=g,0}e.init=function(e,t,n,r,l,d){i=0,w=e,_=t,s=n,p=r,o=l,b=d,a=null},e.proc=function(e,y,x){let m,E,k,A,v,U,R,D=0,F=0,S=0;for(S=y.next_in_index,A=y.avail_in,D=e.bitb,F=e.bitk,v=e.write,U=v<e.read?e.read-v-1:e.end-v;;)switch(i){case 0:if(U>=258&&A>=10&&(e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,x=g(w,_,s,p,o,b,e,y),S=y.next_in_index,A=y.avail_in,D=e.bitb,F=e.bitk,v=e.write,U=v<e.read?e.read-v-1:e.end-v,0!=x)){i=1==x?7:9;break}c=w,a=s,d=p,i=1;case 1:for(m=c;F<m;){if(0===A)return e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);x=0,A--,D|=(255&y.read_byte(S++))<<F,F+=8}if(E=3*(d+(D&r[m])),D>>>=a[E+1],F-=a[E+1],k=a[E],0===k){u=a[E+2],i=6;break}if(0!=(16&k)){f=15&k,l=a[E+2],i=2;break}if(0==(64&k)){c=k,d=E/3+a[E+2];break}if(0!=(32&k)){i=7;break}return i=9,y.msg="invalid literal/length code",x=n,e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);case 2:for(m=f;F<m;){if(0===A)return e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);x=0,A--,D|=(255&y.read_byte(S++))<<F,F+=8}l+=D&r[m],D>>=m,F-=m,c=_,a=o,d=b,i=3;case 3:for(m=c;F<m;){if(0===A)return e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);x=0,A--,D|=(255&y.read_byte(S++))<<F,F+=8}if(E=3*(d+(D&r[m])),D>>=a[E+1],F-=a[E+1],k=a[E],0!=(16&k)){f=15&k,h=a[E+2],i=4;break}if(0==(64&k)){c=k,d=E/3+a[E+2];break}return i=9,y.msg="invalid distance code",x=n,e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);case 4:for(m=f;F<m;){if(0===A)return e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);x=0,A--,D|=(255&y.read_byte(S++))<<F,F+=8}h+=D&r[m],D>>=m,F-=m,i=5;case 5:for(R=v-h;R<0;)R+=e.end;for(;0!==l;){if(0===U&&(v==e.end&&0!==e.read&&(v=0,U=v<e.read?e.read-v-1:e.end-v),0===U&&(e.write=v,x=e.inflate_flush(y,x),v=e.write,U=v<e.read?e.read-v-1:e.end-v,v==e.end&&0!==e.read&&(v=0,U=v<e.read?e.read-v-1:e.end-v),0===U)))return e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);e.window[v++]=e.window[R++],U--,R==e.end&&(R=0),l--}i=0;break;case 6:if(0===U&&(v==e.end&&0!==e.read&&(v=0,U=v<e.read?e.read-v-1:e.end-v),0===U&&(e.write=v,x=e.inflate_flush(y,x),v=e.write,U=v<e.read?e.read-v-1:e.end-v,v==e.end&&0!==e.read&&(v=0,U=v<e.read?e.read-v-1:e.end-v),0===U)))return e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);x=0,e.window[v++]=u,U--,i=0;break;case 7:if(F>7&&(F-=8,A++,S--),e.write=v,x=e.inflate_flush(y,x),v=e.write,U=v<e.read?e.read-v-1:e.end-v,e.read!=e.write)return e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);i=8;case 8:return x=1,e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);case 9:return x=n,e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x);default:return x=t,e.bitb=D,e.bitk=F,y.avail_in=A,y.total_in+=S-y.next_in_index,y.next_in_index=S,e.write=v,e.inflate_flush(y,x)}},e.free=function(){}}const w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function _(e,a){const s=this;let o,l=0,d=0,c=0,u=0;const _=[0],p=[0],b=new h;let g=0,y=new Int32Array(4320);const x=new f;s.bitk=0,s.bitb=0,s.window=new Uint8Array(a),s.end=a,s.read=0,s.write=0,s.reset=function(e,t){t&&(t[0]=0),6==l&&b.free(e),l=0,s.bitk=0,s.bitb=0,s.read=s.write=0},s.reset(e,null),s.inflate_flush=function(e,t){let n,r,a;return r=e.next_out_index,a=s.read,n=(a<=s.write?s.write:s.end)-a,n>e.avail_out&&(n=e.avail_out),0!==n&&t==i&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(s.window.subarray(a,a+n),r),r+=n,a+=n,a==s.end&&(a=0,s.write==s.end&&(s.write=0),n=s.write-a,n>e.avail_out&&(n=e.avail_out),0!==n&&t==i&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(s.window.subarray(a,a+n),r),r+=n,a+=n),e.next_out_index=r,s.read=a,t},s.proc=function(e,i){let a,h,m,E,k,A,v,U;for(E=e.next_in_index,k=e.avail_in,h=s.bitb,m=s.bitk,A=s.write,v=A<s.read?s.read-A-1:s.end-A;;){let R,D,F,S,I,L,T,z;switch(l){case 0:for(;m<3;){if(0===k)return s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);i=0,k--,h|=(255&e.read_byte(E++))<<m,m+=8}switch(a=7&h,g=1&a,a>>>1){case 0:h>>>=3,m-=3,a=7&m,h>>>=a,m-=a,l=1;break;case 1:R=[],D=[],F=[[]],S=[[]],f.inflate_trees_fixed(R,D,F,S),b.init(R[0],D[0],F[0],0,S[0],0),h>>>=3,m-=3,l=6;break;case 2:h>>>=3,m-=3,l=3;break;case 3:return h>>>=3,m-=3,l=9,e.msg="invalid block type",i=n,s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i)}break;case 1:for(;m<32;){if(0===k)return s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);i=0,k--,h|=(255&e.read_byte(E++))<<m,m+=8}if((~h>>>16&65535)!=(65535&h))return l=9,e.msg="invalid stored block lengths",i=n,s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);d=65535&h,h=m=0,l=0!==d?2:0!==g?7:0;break;case 2:if(0===k)return s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);if(0===v&&(A==s.end&&0!==s.read&&(A=0,v=A<s.read?s.read-A-1:s.end-A),0===v&&(s.write=A,i=s.inflate_flush(e,i),A=s.write,v=A<s.read?s.read-A-1:s.end-A,A==s.end&&0!==s.read&&(A=0,v=A<s.read?s.read-A-1:s.end-A),0===v)))return s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);if(i=0,a=d,a>k&&(a=k),a>v&&(a=v),s.window.set(e.read_buf(E,a),A),E+=a,k-=a,A+=a,v-=a,0!=(d-=a))break;l=0!==g?7:0;break;case 3:for(;m<14;){if(0===k)return s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);i=0,k--,h|=(255&e.read_byte(E++))<<m,m+=8}if(c=a=16383&h,(31&a)>29||(a>>5&31)>29)return l=9,e.msg="too many length or distance symbols",i=n,s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);if(a=258+(31&a)+(a>>5&31),!o||o.length<a)o=[];else for(U=0;U<a;U++)o[U]=0;h>>>=14,m-=14,u=0,l=4;case 4:for(;u<4+(c>>>10);){for(;m<3;){if(0===k)return s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);i=0,k--,h|=(255&e.read_byte(E++))<<m,m+=8}o[w[u++]]=7&h,h>>>=3,m-=3}for(;u<19;)o[w[u++]]=0;if(_[0]=7,a=x.inflate_trees_bits(o,_,p,y,e),0!=a)return(i=a)==n&&(o=null,l=9),s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);u=0,l=5;case 5:for(;a=c,!(u>=258+(31&a)+(a>>5&31));){let t,d;for(a=_[0];m<a;){if(0===k)return s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);i=0,k--,h|=(255&e.read_byte(E++))<<m,m+=8}if(a=y[3*(p[0]+(h&r[a]))+1],d=y[3*(p[0]+(h&r[a]))+2],d<16)h>>>=a,m-=a,o[u++]=d;else{for(U=18==d?7:d-14,t=18==d?11:3;m<a+U;){if(0===k)return s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);i=0,k--,h|=(255&e.read_byte(E++))<<m,m+=8}if(h>>>=a,m-=a,t+=h&r[U],h>>>=U,m-=U,U=u,a=c,U+t>258+(31&a)+(a>>5&31)||16==d&&U<1)return o=null,l=9,e.msg="invalid bit length repeat",i=n,s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);d=16==d?o[U-1]:0;do{o[U++]=d}while(0!=--t);u=U}}if(p[0]=-1,I=[],L=[],T=[],z=[],I[0]=9,L[0]=6,a=c,a=x.inflate_trees_dynamic(257+(31&a),1+(a>>5&31),o,I,L,T,z,y,e),0!=a)return a==n&&(o=null,l=9),i=a,s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);b.init(I[0],L[0],y,T[0],y,z[0]),l=6;case 6:if(s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,1!=(i=b.proc(s,e,i)))return s.inflate_flush(e,i);if(i=0,b.free(e),E=e.next_in_index,k=e.avail_in,h=s.bitb,m=s.bitk,A=s.write,v=A<s.read?s.read-A-1:s.end-A,0===g){l=0;break}l=7;case 7:if(s.write=A,i=s.inflate_flush(e,i),A=s.write,v=A<s.read?s.read-A-1:s.end-A,s.read!=s.write)return s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);l=8;case 8:return i=1,s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);case 9:return i=n,s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i);default:return i=t,s.bitb=h,s.bitk=m,e.avail_in=k,e.total_in+=E-e.next_in_index,e.next_in_index=E,s.write=A,s.inflate_flush(e,i)}}},s.free=function(e){s.reset(e,null),s.window=null,y=null},s.set_dictionary=function(e,t,n){s.window.set(e.subarray(t,t+n),0),s.read=s.write=n},s.sync_point=function(){return 1==l?1:0}}const p=13,b=[0,0,255,255];function g(){const e=this;function r(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),0):t}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,0},e.inflateInit=function(n,i){return n.msg=null,e.blocks=null,i<8||i>15?(e.inflateEnd(n),t):(e.wbits=i,n.istate.blocks=new _(n,1<<i),r(n),0)},e.inflate=function(e,r){let a,s;if(!e||!e.istate||!e.next_in)return t;const o=e.istate;for(r=4==r?i:0,a=i;;)switch(o.mode){case 0:if(0===e.avail_in)return a;if(a=r,e.avail_in--,e.total_in++,8!=(15&(o.method=e.read_byte(e.next_in_index++)))){o.mode=p,e.msg="unknown compression method",o.marker=5;break}if(8+(o.method>>4)>o.wbits){o.mode=p,e.msg="invalid window size",o.marker=5;break}o.mode=1;case 1:if(0===e.avail_in)return a;if(a=r,e.avail_in--,e.total_in++,s=255&e.read_byte(e.next_in_index++),((o.method<<8)+s)%31!=0){o.mode=p,e.msg="incorrect header check",o.marker=5;break}if(0==(32&s)){o.mode=7;break}o.mode=2;case 2:if(0===e.avail_in)return a;a=r,e.avail_in--,e.total_in++,o.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,o.mode=3;case 3:if(0===e.avail_in)return a;a=r,e.avail_in--,e.total_in++,o.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,o.mode=4;case 4:if(0===e.avail_in)return a;a=r,e.avail_in--,e.total_in++,o.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,o.mode=5;case 5:return 0===e.avail_in?a:(a=r,e.avail_in--,e.total_in++,o.need+=255&e.read_byte(e.next_in_index++),o.mode=6,2);case 6:return o.mode=p,e.msg="need dictionary",o.marker=0,t;case 7:if(a=o.blocks.proc(e,a),a==n){o.mode=p,o.marker=0;break}if(0==a&&(a=r),1!=a)return a;a=r,o.blocks.reset(e,o.was),o.mode=12;case 12:return 1;case p:return n;default:return t}},e.inflateSetDictionary=function(e,n,i){let r=0,a=i;if(!e||!e.istate||6!=e.istate.mode)return t;const s=e.istate;return a>=1<<s.wbits&&(a=(1<<s.wbits)-1,r=i-a),s.blocks.set_dictionary(n,r,a),s.mode=7,0},e.inflateSync=function(e){let a,s,o,l,d;if(!e||!e.istate)return t;const c=e.istate;if(c.mode!=p&&(c.mode=p,c.marker=0),0===(a=e.avail_in))return i;for(s=e.next_in_index,o=c.marker;0!==a&&o<4;)e.read_byte(s)==b[o]?o++:o=0!==e.read_byte(s)?0:4-o,s++,a--;return e.total_in+=s-e.next_in_index,e.next_in_index=s,e.avail_in=a,c.marker=o,4!=o?n:(l=e.total_in,d=e.total_out,r(e),e.total_in=l,e.total_out=d,c.mode=7,0)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():t}}function y(){}y.prototype={inflateInit:function(e){const t=this;return t.istate=new g,e||(e=15),t.istate.inflateInit(t,e)},inflate:function(e){const n=this;return n.istate?n.istate.inflate(n,e):t},inflateEnd:function(){const e=this;if(!e.istate)return t;const n=e.istate.inflateEnd(e);return e.istate=null,n},inflateSync:function(){const e=this;return e.istate?e.istate.inflateSync(e):t},inflateSetDictionary:function(e,n){const i=this;return i.istate?i.istate.inflateSetDictionary(i,e,n):t},read_byte:function(e){return this.next_in.subarray(e,e+1)[0]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}};const x="function";function m(e,t){return class{constructor(n){const i=e=>{if(this.pendingData){const t=this.pendingData;this.pendingData=new Uint8Array(t.length+e.length),this.pendingData.set(t,0),this.pendingData.set(e,t.length)}else this.pendingData=new Uint8Array(e)};if(this.codec=new e(Object.assign({},t,n)),typeof this.codec.onData==x)this.codec.onData=i;else{if(typeof this.codec.on!=x)throw new Error("Cannot register the callback function");this.codec.on("data",i)}}async append(e){return this.codec.push(e),n(this)}async flush(){return this.codec.push(new Uint8Array(0),!0),n(this)}};function n(e){if(e.pendingData){const t=e.pendingData;return e.pendingData=null,t}return new Uint8Array(0)}}const E=4294967295,k=65535,A=67324752,v=134695760,U=33639248,R=101010256,D=101075792,F=117853008,S=39169,I=2048;class L{constructor(){this.crc=-1,this.table=(()=>{const e=[];for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)1&n?n=n>>>1^3988292384:n>>>=1;e[t]=n}return e})()}append(e){const t=this.table;let n=0|this.crc;for(let i=0,r=0|e.length;i<r;i++)n=n>>>8^t[255&(n^e[i])];this.crc=n}get(){return~this.crc}}const T="Invalid pasword",z=16,C="raw",M={name:"PBKDF2"},W={name:"HMAC"},N="SHA-1",O={name:"AES-CTR"},P=Object.assign({hash:W},M),B=Object.assign({iterations:1e3,hash:{name:N}},M),V=Object.assign({hash:N},W),j=Object.assign({length:z},O),H=["deriveBits"],Z=["sign"],q=528,K=10,Y=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],X=crypto.subtle;class G{constructor(e,t){this.password=e,this.signed=t,this.input=t&&new Uint8Array(0),this.pendingInput=new Uint8Array(0)}async append(e){const t=async(r=0)=>{if(r+z<=i.length-K){const e=i.subarray(r,r+z),a=await X.decrypt(Object.assign({counter:this.counter},j),this.keys.decrypt,e);return Q(this.counter),n.set(new Uint8Array(a),r),t(r+z)}return this.pendingInput=i.subarray(r),this.signed&&(this.input=$(this.input,e)),n};if(this.password){const t=e.subarray(0,18);await async function(e,t,n){e.counter=new Uint8Array(Y);const i=t.subarray(0,16),r=t.subarray(16),a=(new TextEncoder).encode(n),s=await X.importKey(C,a,P,!1,H),o=await X.deriveBits(Object.assign({salt:i},B),s,528),l=new Uint8Array(o),d=l.subarray(64);if(e.keys={decrypt:await X.importKey(C,l.subarray(0,32),O,!0,["decrypt"]),authentication:await X.importKey(C,l.subarray(32,64),V,!1,Z),passwordVerification:d},d[0]!=r[0]||d[1]!=r[1])throw new Error(T)}(this,t,this.password),this.password=null,e=e.subarray(18)}let n=new Uint8Array(e.length-K-(e.length-K)%z),i=e;return this.pendingInput.length&&(i=$(this.pendingInput,e),n=ee(n,i.length-K-(i.length-K)%z)),t()}async flush(){const e=this.pendingInput,t=this.keys,n=e.subarray(0,e.length-K),i=e.subarray(e.length-K);let r=new Uint8Array(0);if(n.length){const e=await X.decrypt(Object.assign({counter:this.counter},j),t.decrypt,n);r=new Uint8Array(e)}let a=!0;if(this.signed){const e=await X.sign(W,t.authentication,this.input.subarray(0,this.input.length-K)),n=new Uint8Array(e);this.input=null;for(let e=0;e<K;e++)n[e]!=i[e]&&(a=!1)}return{valid:a,data:r}}}class J{constructor(e){this.password=e,this.output=new Uint8Array(0),this.pendingInput=new Uint8Array(0)}async append(e){const t=async(r=0)=>{if(r+z<=e.length){const a=e.subarray(r,r+z),s=await X.encrypt(Object.assign({counter:this.counter},j),this.keys.encrypt,a);return Q(this.counter),i.set(new Uint8Array(s),r+n.length),t(r+z)}return this.pendingInput=e.subarray(r),this.output=$(this.output,i),i};let n=new Uint8Array(0);this.password&&(n=await async function(e,t){e.counter=new Uint8Array(Y);const n=crypto.getRandomValues(new Uint8Array(16)),i=(new TextEncoder).encode(t),r=await X.importKey(C,i,P,!1,H),a=await X.deriveBits(Object.assign({salt:n},B),r,q),s=new Uint8Array(a);return e.keys={encrypt:await X.importKey(C,s.subarray(0,32),O,!0,["encrypt"]),authentication:await X.importKey(C,s.subarray(32,64),V,!1,Z),passwordVerification:s.subarray(64)},$(n,e.keys.passwordVerification)}(this,this.password),this.password=null);let i=new Uint8Array(n.length+e.length-e.length%z);return i.set(n,0),this.pendingInput.length&&(e=$(this.pendingInput,e),i=ee(i,e.length-e.length%z)),t()}async flush(){let e=new Uint8Array(0);if(this.pendingInput.length){const t=await X.encrypt(Object.assign({counter:this.counter},j),this.keys.encrypt,this.pendingInput);e=new Uint8Array(t),this.output=$(this.output,e)}const t=await X.sign(W,this.keys.authentication,this.output.subarray(18));this.output=null;const n=new Uint8Array(t).subarray(0,K);return{data:$(e,n),signature:n}}}function Q(e){for(let t=0;t<16;t++){if(255!=e[t]){e[t]++;break}e[t]=0}}function $(e,t){let n=e;return e.length+t.length&&(n=new Uint8Array(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ee(e,t){if(t&&t>e.length){const n=e;(e=new Uint8Array(t)).set(n,0)}return e}const te="deflate",ne="inflate",ie="Invalid signature";class re{constructor(e){this.signature=e.inputSignature,this.encrypted=Boolean(e.inputPassword),this.signed=e.inputSigned,this.compressed=e.inputCompressed,this.inflate=this.compressed&&new e.codecConstructor,this.crc32=this.signed&&this.signed&&new L,this.decrypt=this.encrypted&&new G(e.inputPassword)}async append(e){return this.encrypted&&(e=await this.decrypt.append(e)),this.compressed&&e.length&&(e=await this.inflate.append(e)),!this.encrypted&&this.signed&&this.crc32.append(e),e}async flush(){let e,t=new Uint8Array(0);if(this.encrypted){const e=await this.decrypt.flush();if(!e.valid)throw new Error(ie);t=e.data}else if(this.signed){const t=new DataView(new Uint8Array(4).buffer);if(e=this.crc32.get(),t.setUint32(0,e),this.signature!=t.getUint32(0,!1))throw new Error(ie)}return this.compressed&&(t=await this.inflate.append(t)||new Uint8Array(0),await this.inflate.flush()),{data:t,signature:e}}}class ae{constructor(e){this.encrypted=e.outputEncrypted,this.signed=e.outputSigned,this.compressed=e.outputCompressed,this.deflate=this.compressed&&new e.codecConstructor({level:e.level||5}),this.crc32=this.signed&&new L,this.encrypt=this.encrypted&&new J(e.outputPassword)}async append(e){let t=e;return this.compressed&&e.length&&(t=await this.deflate.append(e)),this.encrypted?t=await this.encrypt.append(t):this.signed&&this.crc32.append(e),t}async flush(){let e,t=new Uint8Array(0);if(this.compressed&&(t=await this.deflate.flush()||new Uint8Array(0)),this.encrypted){t=await this.encrypt.append(t);const n=await this.encrypt.flush();e=n.signature;const i=new Uint8Array(t.length+n.data.length);i.set(t,0),i.set(n.data,t.length),t=i}else this.signed&&(e=this.crc32.get());return{data:t,signature:e}}}const se="init",oe="append",le="flush",de="message";const ce={pool:[],pendingRequests:[]};function ue(e,t){const n=ce.pool,i=!(e.inputCompressed||e.inputSigned||e.inputEncrypted||e.outputCompressed||e.outputSigned||e.outputEncrypted),r=e.useWebWorkers||void 0===e.useWebWorkers&&t.useWebWorkers&&!i;let a;if(r){const n=e.codecType;t.workerScripts?a=t.workerScripts[n]:e.workerScriptsPath=(t.workerScriptsPath||"")+"z-worker.js"}if(n.length<t.maxWorkers){const t={};return n.push(t),fe(t,e,r,a)}{const t=n.find((e=>!e.busy));return t?fe(t,e,r,a):new Promise((t=>ce.pendingRequests.push({resolve:t,options:e,webWorker:r,scripts:a})))}}function fe(e,t,n,i){return e.busy=!0,e.options=t,e.scripts=i,e.webWorker=n,n?function(e,t){let n;e.interface||(e.scripts?e.worker=new Worker(new URL(e.scripts[0],"undefined"==typeof document?new(require("url").URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("zip-inflate.min.js",document.baseURI).href)):e.worker=new Worker(new URL(t.workerScriptsPath,"undefined"==typeof document?new(require("url").URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("zip-inflate.min.js",document.baseURI).href)),e.worker.addEventListener(de,a,!1),e.interface={append:e=>i({type:oe,data:e}),flush:()=>i({type:le})});return e.interface;async function i(t){if(!n){const t=e.options,n=e.scripts?e.scripts.slice(1):[];await r(Object.assign({scripts:n,type:se,options:{codecType:t.codecType,inputPassword:t.inputPassword,inputSigned:t.inputSigned,inputSignature:t.signature,inputCompressed:t.inputCompressed,inputEncrypted:t.inputEncrypted,level:t.level,outputPassword:t.outputPassword,outputSigned:t.outputSigned,outputCompressed:t.outputCompressed,outputEncrypted:t.outputEncrypted}}))}return r(t)}function r(t){const i=e.worker,r=new Promise(((e,t)=>n={resolve:e,reject:t}));try{if(t.data)try{i.postMessage(t,[t.data.buffer])}catch(e){i.postMessage(t)}else i.postMessage(t)}catch(t){n.reject(t),n=null,he(e)}return r}function a(t){const i=t.data;if(n){const t=i.error;if(t){const i=new Error(t.message);i.stack=t.stack,n.reject(i),n=null,he(e)}else i.type!=se&&i.type!=le&&i.type!=oe||(i.type==le?(n.resolve({data:new Uint8Array(i.data),signature:i.signature}),n=null,he(e)):n.resolve(i.data&&new Uint8Array(i.data)))}}}(e,t):function(e){const t=function(e){return e.codecType.startsWith(te)?new ae(e):e.codecType.startsWith(ne)?new re(e):void 0}(e.options);return{async append(n){try{return await t.append(n)}catch(t){throw he(e),t}},async flush(){try{return await t.flush()}finally{he(e)}}}}(e)}function he(e){if(e.busy=!1,ce.pendingRequests.length){const[{resolve:t,options:n,webWorker:i,scripts:r}]=ce.pendingRequests.splice(0,1);t(fe(e,n,i,r))}else e.worker&&e.worker.terminate(),ce.pool=ce.pool.filter((t=>t!=e))}async function we(e,t,n,i,r,a,s){const o=Math.max(a.chunkSize,64);return async function a(l=0,d=0){const c=l*o;if(c<r){const u=await t.readUint8Array(c+i,Math.min(o,r-c)),f=await e.append(u);return d+=await _e(n,f),s.onprogress&&s.onprogress(c+u.length,r),a(l+1,d)}{const t=await e.flush();return d+=await _e(n,t.data),{signature:t.signature,length:d}}}()}async function _e(e,t){return t.length&&await e.writeUint8Array(t),t.length}const pe=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES"];class be{constructor(e){pe.forEach((t=>this[t]=e[t]))}}const ge="File format is not recognized",ye="End of central directory not found",xe="End of Zip64 central directory not found",me="End of Zip64 central directory locator not found",Ee="Central directory header not found",ke="Local file header not found",Ae="Zip64 extra field not found",ve="File contains encrypted entry",Ue="Encryption not supported",Re="Compression method not supported",De="utf-8",Fe=["uncompressedSize","compressedSize","offset"],Se=["\0","☺","☻","♥","♦","♣","♠","•","◘","○","◙","♂","♀","♪","♫","☼","►","◄","↕","‼","¶","§","▬","↨","↑","↓","→","←","∟","↔","▲","▼"," ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","⌂","Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","¢","£","¥","₧","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","⌐","¬","½","¼","¡","«","»","░","▒","▓","│","┤","╡","╢","╖","╕","╣","║","╗","╝","╜","╛","┐","└","┴","┬","├","─","┼","╞","╟","╚","╔","╩","╦","╠","═","╬","╧","╨","╤","╥","╙","╘","╒","╓","╫","╪","┘","┌","█","▄","▌","▐","▀","α","ß","Γ","π","Σ","σ","µ","τ","Φ","Θ","Ω","δ","∞","φ","ε","∩","≡","±","≥","≤","⌠","⌡","÷","≈","°","∙","·","√","ⁿ","²","■"," "];class Ie{constructor(e,t,n){this.reader=e,this.config=t,this.options=n}async getData(e,t={}){const n=this.reader;n.initialized||await n.init();const i=await n.readUint8Array(this.offset,30),r=new DataView(i.buffer),a=void 0===t.password?this.options.password:t.password;let s=a&&a.length&&a;if(this.extraFieldAES){if(99!=this.extraFieldAES.originalCompressionMethod)throw new Error(Re);if(3!=this.extraFieldAES.strength)throw new Error(Ue)}if(0!=this.compressionMethod&&8!=this.compressionMethod)throw new Error(Re);if(Ne(r,0)!=A)throw new Error(ke);const o=this.localDirectory={};Le(o,r,4),o.rawExtraField=i.subarray(this.offset+30+o.filenameLength,this.offset+30+o.filenameLength+o.extraFieldLength),Te(this,o,r,4);let l=this.offset+30+o.filenameLength+o.extraFieldLength;const d=this.bitFlag.encrypted&&o.bitFlag.encrypted;if(d&&!s)throw new Error(ve);const c=await ue({codecType:ne,codecConstructor:this.config.Inflate,inputPassword:s,inputSigned:void 0===t.checkSignature?this.options.checkSignature:t.checkSignature,inputSignature:this.signature,inputCompressed:0!=this.compressionMethod,inputEncrypted:d,useWebWorkers:void 0===t.useWebWorkers?this.options.useWebWorkers:t.useWebWorkers},this.config);return e.initialized||await e.init(),await we(c,n,e,l,this.compressedSize,this.config,{onprogress:t.onprogress}),e.getData()}}function Le(e,t,n){e.version=We(t,n);const i=e.rawBitFlag=We(t,n+2);e.bitFlag={encrypted:1==(1&i),level:(6&i)>>1,dataDescriptor:8==(8&i),languageEncodingFlag:(i&I)==I},e.encrypted=e.bitFlag.encrypted,e.rawLastModDate=Ne(t,n+6),e.lastModDate=function(e){const t=(4294901760&e)>>16,n=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}(e.rawLastModDate),e.filenameLength=We(t,n+22),e.extraFieldLength=We(t,n+24)}function Te(e,t,n,i){const r=t.rawExtraField,a=t.extraField=new Map,s=new DataView(new Uint8Array(r).buffer);let o=0;try{for(;o<r.length;){const e=We(s,o),t=We(s,o+2);a.set(e,{type:e,data:r.slice(o+4,o+4+t)}),o+=4+t}}catch(e){}const l=We(n,i+4);t.signature=Ne(n,i+10),t.uncompressedSize=Ne(n,i+18),t.compressedSize=Ne(n,i+14);const d=t.extraFieldZip64=a.get(1);d&&function(e,t){t.zip64=!0;const n=new DataView(e.data.buffer);e.values=[];for(let t=0;t<Math.floor(e.data.length/8);t++)e.values.push(Number(Oe(n,0+8*t)));const i=Fe.filter((e=>t[e]==E));for(let t=0;t<i.length;t++)e[i[t]]=e.values[t];Fe.forEach((n=>{if(t[n]==E){if(!e||void 0===e[n])throw new Error(Ae);t[n]=e[n]}}))}(d,t);const c=t.extraFieldUnicodePath=a.get(28789);c&&ze(c,"filename","rawFilename",t,e);let u=t.extraFieldUnicodeComment=a.get(25461);u&&ze(u,"comment","rawComment",t,e);const f=t.extraFieldAES=a.get(39169);f?function(e,t,n){if(e){const i=new DataView(e.data.buffer);e.vendorVersion=Me(i,0),e.vendorId=Me(i,2);const r=Me(i,4);e.strength=r,e.originalCompressionMethod=n,t.compressionMethod=e.compressionMethod=We(i,5)}else t.compressionMethod=n}(f,t,l):t.compressionMethod=l,8==t.compressionMethod&&(t.bitFlag.enhancedDeflating=16!=(16&t.rawBitFlag))}function ze(e,t,n,i,r){const a=new DataView(e.data.buffer);e.version=Me(a,0),e.signature=Ne(a,1);const s=new L;s.append(r[n]);const o=new DataView(new Uint8Array(4).buffer);o.setUint32(0,s.get(),!0),e[t]=(new TextDecoder).decode(e.data.subarray(5)),e.valid=!r.bitFlag.languageEncodingFlag&&e.signature==Ne(o,0),e.valid&&(i[t]=e[t])}function Ce(e,t){if(t&&"cp437"!=t.trim().toLowerCase())return new TextDecoder(t).decode(e);{let t="";for(let n=0;n<e.length;n++)t+=Se[e[n]];return t}}function Me(e,t){return e.getUint8(t)}function We(e,t){return e.getUint16(t,!0)}function Ne(e,t){return e.getUint32(t,!0)}function Oe(e,t){return e.getBigUint64(t,!0)}const Pe="HTTP error ",Be="HTTP Range not supported",Ve="text/plain";class je{constructor(){this.size=0}init(){this.initialized=!0}}class He extends je{}class Ze extends je{writeUint8Array(e){this.size+=e.length}}class qe extends He{constructor(e){super(),this.blob=e,this.size=e.size}readUint8Array(e,t){const n=new FileReader;return new Promise(((i,r)=>{n.onload=e=>i(new Uint8Array(e.target.result)),n.onerror=r,n.readAsArrayBuffer(this.blob.slice(e,e+t))}))}}class Ke extends Ze{constructor(){super(),this.array=new Uint8Array(0)}writeUint8Array(e){super.writeUint8Array(e);const t=this.array;this.array=new Uint8Array(t.length+e.length),this.array.set(t),this.array.set(e,t.length)}getData(){return this.array}}function Ye(e,t){return new Promise(((n,i)=>{const r=new XMLHttpRequest;r.addEventListener("load",(()=>{r.status<400?(e.size||(e.size=Number(r.getResponseHeader("Content-Length"))||Number(r.response.byteLength)),e.data=new Uint8Array(r.response),n()):i(Pe+(r.statusText||r.status)+".")}),!1),r.addEventListener("error",i,!1),r.open("GET",t),r.responseType="arraybuffer",r.send()}))}const Xe="File already exists",Ge="Zip file comment exceeds 64KB",Je="File entry comment exceeds 64KB",Qe="File entry name exceeds 64KB",$e="Version exceeds 65535",et="The minimum year for the date is 1980",tt="Extra field type exceeds 65535",nt="Extra field data exceeds 64KB",it=new Uint8Array([7,0,2,0,65,69,3,0,0]);function rt(e,t,n){e.setUint8(t,n)}function at(e,t,n){e.setUint16(t,n,!0)}function st(e,t,n){e.setUint32(t,n,!0)}function ot(e,t,n){e.setBigUint64(t,n,!0)}const lt={chunkSize:524288,maxWorkers:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,workerScriptsPath:void 0,useWebWorkers:!0};let dt=Object.assign({},lt);function ct(e){if(dt=Object.assign({},dt,e),null!=dt.workerScripts&&null!=dt.workerScriptsPath)throw new Error("Either workerScripts or workerScriptsPath may be set, not both");if(dt.workerScripts){if(dt.workerScripts.deflate&&!Array.isArray(dt.workerScripts.deflate))throw new Error("workerScripts.deflate must be an array");if(dt.workerScripts.inflate&&!Array.isArray(dt.workerScripts.inflate))throw new Error("workerScripts.inflate must be an array")}}ct({Inflate:function(){const e=new y,t=new Uint8Array(512);let n=!1;e.inflateInit(),e.next_out=t,this.append=function(r,a){const s=[];let o,l,d=0,c=0,u=0;if(0!==r.length){e.next_in_index=0,e.next_in=r,e.avail_in=r.length;do{if(e.next_out_index=0,e.avail_out=512,0!==e.avail_in||n||(e.next_in_index=0,n=!0),o=e.inflate(0),n&&o===i){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==o&&1!==o)throw new Error("inflating: "+e.msg);if((n||1===o)&&e.avail_in===r.length)throw new Error("inflating: bad input");e.next_out_index&&(512===e.next_out_index?s.push(new Uint8Array(t)):s.push(new Uint8Array(t.subarray(0,e.next_out_index)))),u+=e.next_out_index,a&&e.next_in_index>0&&e.next_in_index!=d&&(a(e.next_in_index),d=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return l=new Uint8Array(u),s.forEach((function(e){l.set(e,c),c+=e.length})),l}},this.flush=function(){e.inflateEnd()}}}),e.BlobReader=qe,e.BlobWriter=class extends Ze{constructor(e){super(),this.offset=0,this.contentType=e,this.blob=new Blob([],{type:e})}writeUint8Array(e){super.writeUint8Array(e),this.blob=new Blob([this.blob,e.buffer],{type:this.contentType}),this.offset=this.blob.size}getData(){return this.blob}},e.Data64URIReader=class extends He{constructor(e){super(),this.dataURI=e;let t=e.length;for(;"="==e.charAt(t-1);)t--;this.dataStart=e.indexOf(",")+1,this.size=Math.floor(.75*(t-this.dataStart))}readUint8Array(e,t){const n=new Uint8Array(t),i=4*Math.floor(e/3),r=atob(this.dataURI.substring(i+this.dataStart,4*Math.ceil((e+t)/3)+this.dataStart)),a=e-3*Math.floor(i/4);for(let e=a;e<a+t;e++)n[e-a]=r.charCodeAt(e);return n}},e.Data64URIWriter=class extends Ze{constructor(e){super(),this.data="data:"+(e||"")+";base64,",this.pending=[]}writeUint8Array(e){super.writeUint8Array(e);let t=0,n=this.pending;const i=this.pending.length;for(this.pending="",t=0;t<3*Math.floor((i+e.length)/3)-i;t++)n+=String.fromCharCode(e[t]);for(;t<e.length;t++)this.pending+=String.fromCharCode(e[t]);n.length>2?this.data+=btoa(n):this.pending=n}getData(){return this.data+btoa(this.pending)}},e.ERR_BAD_FORMAT=ge,e.ERR_CENTRAL_DIRECTORY_NOT_FOUND=Ee,e.ERR_DUPLICATED_NAME=Xe,e.ERR_ENCRYPTED=ve,e.ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND=me,e.ERR_EOCDR_NOT_FOUND=ye,e.ERR_EOCDR_ZIP64_NOT_FOUND=xe,e.ERR_EXTRAFIELD_ZIP64_NOT_FOUND=Ae,e.ERR_HTTP_RANGE=Be,e.ERR_INVALID_COMMENT=Ge,e.ERR_INVALID_DATE=et,e.ERR_INVALID_ENTRY_COMMENT=Je,e.ERR_INVALID_ENTRY_NAME=Qe,e.ERR_INVALID_EXTRAFIELD_DATA=nt,e.ERR_INVALID_EXTRAFIELD_TYPE=tt,e.ERR_INVALID_PASSORD=T,e.ERR_INVALID_SIGNATURE=ie,e.ERR_INVALID_VERSION=$e,e.ERR_LOCAL_FILE_HEADER_NOT_FOUND=ke,e.ERR_UNSUPPORTED_COMPRESSION=Re,e.ERR_UNSUPPORTED_ENCRYPTION=Ue,e.HttpRangeReader=class extends He{constructor(e){super(),this.url=e}init(){return super.init(),new Promise(((e,t)=>{const n=new XMLHttpRequest;n.addEventListener("load",(()=>{n.status<400?(this.size=Number(n.getResponseHeader("Content-Length")),"bytes"==n.getResponseHeader("Accept-Ranges")?e():t(new Error(Be))):t(Pe+(n.statusText||n.status)+".")}),!1),n.addEventListener("error",t,!1),n.open("HEAD",this.url),n.send()}))}readUint8Array(e,t){return new Promise(((n,i)=>{const r=new XMLHttpRequest;r.open("GET",this.url),r.responseType="arraybuffer",r.setRequestHeader("Range","bytes="+e+"-"+(e+t-1)),r.addEventListener("load",(()=>{r.status<400?n(new Uint8Array(r.response)):i(Pe+(r.statusText||r.status)+".")}),!1),r.addEventListener("error",i,!1),r.send()}))}},e.HttpReader=class extends He{constructor(e){super(),this.url=e}async init(){if(super.init(),function(e){if("undefined"!=typeof document){const t=document.createElement("a");return t.href=e,"http:"==t.protocol||"https:"==t.protocol}return/^https?:\/\//i.test(e)}(this.url))return new Promise(((e,t)=>{const n=new XMLHttpRequest;n.addEventListener("load",(()=>{n.status<400?(this.size=Number(n.getResponseHeader("Content-Length")),this.size?e():Ye().then((()=>e())).catch(t)):t(Pe+(n.statusText||n.status)+".")}),!1),n.addEventListener("error",t,!1),n.open("HEAD",this.url),n.send()}));await Ye()}async readUint8Array(e,t){return this.data||await Ye(this,this.url),new Uint8Array(this.data.subarray(e,e+t))}},e.Reader=He,e.TextReader=class extends He{constructor(e){super(),this.blobReader=new qe(new Blob([e],{type:Ve}))}init(){super.init(),this.blobReader.init(),this.size=this.blobReader.size}readUint8Array(e,t){return this.blobReader.readUint8Array(e,t)}},e.TextWriter=class extends Ze{constructor(e){super(),this.encoding=e,this.blob=new Blob([],{type:Ve})}writeUint8Array(e){super.writeUint8Array(e),this.blob=new Blob([this.blob,e.buffer],{type:Ve})}getData(){const e=new FileReader;return new Promise(((t,n)=>{e.onload=e=>t(e.target.result),e.onerror=n,e.readAsText(this.blob,this.encoding)}))}},e.Uint8ArrayReader=class extends He{constructor(e){super(),this.array=e,this.size=e.length}readUint8Array(e,t){return this.array.slice(e,e+t)}},e.Uint8ArrayWriter=Ke,e.Writer=Ze,e.ZipReader=class extends class{constructor(e,t={},n={}){this.reader=e,this.options=t,this.config=n}async getEntries(e={}){const t=this.reader;t.initialized||await t.init();const n=await async function(e,t,n,i){const r=new Uint8Array(4);if(function(e,t,n){e.setUint32(t,n,!0)}(new DataView(r.buffer),0,t),e.size<n)throw new Error(ge);const a=n+i;let s=n,o=await l(s);o||(o=await l(Math.min(a,e.size)));return o;async function l(t){const i=e.size-t,a=await e.readUint8Array(i,t);for(let e=a.length-n;e>=0;e--)if(a[e]==r[0]&&a[e+1]==r[1]&&a[e+2]==r[2]&&a[e+3]==r[3])return{offset:i,buffer:a.slice(e,e+n).buffer}}}(t,R,22,k);if(!n)throw new Error(ye);const i=new DataView(n.buffer);let r,a=Ne(i,16),s=We(i,8);if(a==E||s==k){r=!0;const e=await t.readUint8Array(n.offset-20,20),i=new DataView(e.buffer);if(Number(Ne(i,0))!=F)throw new Error(xe);a=Number(Oe(i,8));const o=await t.readUint8Array(a,56),l=new DataView(o.buffer);if(Number(Ne(l,0))!=D)throw new Error(me);s=Number(Oe(l,24)),a-=Number(Oe(l,40))}if(a<0||!r&&(a>=t.size||s>=k))throw new Error(ge);const o=await t.readUint8Array(a,t.size-a),l=new DataView(o.buffer),d=[];let c=0;for(let t=0;t<s;t++){const t=new Ie(this.reader,this.config,this.options);if(Ne(l,c)!=U)throw new Error(Ee);t.compressedSize=0,t.uncompressedSize=0,Le(t,l,c+6),t.commentLength=We(l,c+32),t.directory=16==(16&Me(l,c+38)),t.offset=Ne(l,c+42),t.rawFilename=o.subarray(c+46,c+46+t.filenameLength);const n=void 0===e.filenameEncoding?this.options.filenameEncoding:e.filenameEncoding;t.filename=Ce(t.rawFilename,t.bitFlag.languageEncodingFlag?De:n),!t.directory&&t.filename&&"/"==t.filename.charAt(t.filename.length-1)&&(t.directory=!0),t.rawExtraField=o.subarray(c+46+t.filenameLength,c+46+t.filenameLength+t.extraFieldLength),Te(t,t,l,c+6),t.rawComment=o.subarray(c+46+t.filenameLength+t.extraFieldLength,c+46+t.filenameLength+t.extraFieldLength+t.commentLength);const i=void 0===e.commentEncoding?this.options.commentEncoding:e.commentEncoding;t.comment=Ce(t.rawComment,t.bitFlag.languageEncodingFlag?De:i);const r=new be(t);r.getData=(e,n)=>t.getData(e,n),d.push(r),c+=46+t.filenameLength+t.extraFieldLength+t.commentLength}return d}async close(){}}{constructor(e,t){super(e,t,dt)}},e.ZipWriter=class extends class{constructor(e,t={},n={}){this.writer=e,this.options=t,this.config=n,this.files=new Map,this.offset=e.size}async add(e="",t,n={}){if(e=e.trim(),!n.directory||e.length&&"/"==e.charAt(e.length-1)||(e+="/"),this.files.has(e))throw new Error(Xe);const i=(new TextEncoder).encode(e);if(i.length>k)throw new Error(Qe);const r=n.comment||"",a=(new TextEncoder).encode(r);if(a.length>k)throw new Error(Je);const s=this.options.version||n.version||0;if(s>k)throw new Error($e);const o=n.lastModDate||new Date;if(o.getFullYear()<1980)throw new Error(et);t&&!t.initialized&&await t.init();let l=new Uint8Array(0);const d=n.extraField;if(d){let e=4,t=0;d.forEach((t=>e+=t.length)),l=new Uint8Array(e),d.forEach(((e,n)=>{if(n>k)throw new Error(tt);if(e.length>k)throw new Error(nt);l.set(new Uint16Array([n]),t),l.set(new Uint16Array([e.length]),t+2),l.set(e,t+4),t+=4+e.length}))}const c=n.zip64||this.options.zip64||this.offset>=E||t&&(t.size>=E||this.offset+t.size>=E),u=void 0===n.password?this.options.password:n.password,f=void 0===n.level?this.options.level:n.level,h=void 0===n.useWebWorkers?this.options.useWebWorkers:n.useWebWorkers,w=await async function(e,t,n,i){const r=e.files,a=e.writer;let s;r.set(t,null);try{let o,l;try{i.bufferedWrite||e.options.bufferedWrite||e.lockWrite?(o=new Ke,o.init()):(e.lockWrite=new Promise((e=>s=e)),a.initialized||await a.init(),o=a),l=await async function(e,t,n,i){const r=i.rawFilename,a=i.lastModDate,s=i.password,o=Boolean(s&&s.length),l=i.level,d=0!==l&&!i.directory,c=i.zip64;let u;if(o){u=new Uint8Array(it.length+2);at(new DataView(u.buffer),0,S),u.set(it,2)}else u=new Uint8Array(0);const f={version:i.version||20,zip64:c,directory:Boolean(i.directory),rawFilename:r,rawComment:i.rawComment,rawExtraFieldZip64:c?new Uint8Array(28):new Uint8Array(0),rawExtraFieldAES:u,rawExtraField:i.rawExtraField};let h=2056,w=0;d&&(w=8);c&&(f.version=f.version>45?f.version:45);o&&(f.version=f.version>51?f.version:51,h|=1,w=99,d&&(f.rawExtraFieldAES[9]=8));const _=f.headerArray=new Uint8Array(26),p=new DataView(_.buffer);at(p,0,f.version),at(p,2,h),at(p,4,w),at(p,6,(a.getHours()<<6|a.getMinutes())<<5|a.getSeconds()/2),at(p,8,(a.getFullYear()-1980<<4|a.getMonth()+1)<<5|a.getDate()),at(p,22,r.length),at(p,24,0);const b=p.getUint32(6,!0),g=new Uint8Array(30+r.length);st(new DataView(g.buffer),0,A),g.set(_,4),g.set(r,30);let y,x=0,m=0;if(e){x=e.size;const r=await ue({codecType:te,codecConstructor:n.Deflate,level:l,outputPassword:s,outputSigned:!0,outputCompressed:d,outputEncrypted:o,useWebWorkers:i.useWebWorkers},n);await t.writeUint8Array(g),y=await we(r,e,t,0,x,n,{onprogress:i.onprogress}),m=y.length}else await t.writeUint8Array(g);const k=new Uint8Array(c?24:16),U=new DataView(k.buffer);if(st(U,0,v),e)if(o||void 0===y.signature||(st(p,10,y.signature),st(U,4,y.signature),f.signature=y.signature),c){const e=new DataView(f.rawExtraFieldZip64.buffer);at(e,0,1),at(e,2,24),st(p,14,E),ot(U,8,BigInt(m)),ot(e,12,BigInt(m)),st(p,18,E),ot(U,16,BigInt(x)),ot(e,4,BigInt(x))}else st(p,14,m),st(U,8,m),st(p,18,x),st(U,12,x);return await t.writeUint8Array(k),f.compressedSize=m,f.uncompressedSize=x,f.lastModDate=a,f.rawLastModDate=b,f.encrypted=o,f.length=g.length+(y?y.length:0)+k.length,f}(n,o,e.config,i)}catch(e){throw r.delete(t),e}if(r.set(t,l),o!=a&&(e.lockWrite&&await e.lockWrite,await a.writeUint8Array(o.getData())),l.offset=e.offset,l.zip64){ot(new DataView(l.rawExtraFieldZip64.buffer),20,BigInt(l.offset))}return e.offset+=l.length,l}finally{s&&(e.lockWrite=null,s())}}(this,e,t,Object.assign({},n,{rawFilename:i,rawComment:a,version:s,lastModDate:o,rawExtraField:l,zip64:c,password:u,level:f,useWebWorkers:h}));return w.filename=e,w.comment=r,w.extraField=d,new be(w)}async close(e=new Uint8Array(0)){const t=this.writer,n=this.files;let i=0,r=0,a=this.offset,s=n.size;if(e.length){if(!(e.length<=k))throw new Error(Ge);at(d,i+20,e.length)}for(const[,e]of n)r+=46+e.rawFilename.length+e.rawComment.length+e.rawExtraFieldZip64.length+e.rawExtraFieldAES.length+e.rawExtraField.length;const o=this.options.zip64||a+r>=E||s>=k,l=new Uint8Array(r+(o?98:22)),d=new DataView(l.buffer);for(const[,e]of n){const t=e.rawFilename,n=e.rawExtraFieldZip64,r=e.rawExtraFieldAES,a=n.length+r.length+e.rawExtraField.length;st(d,i,U),at(d,i+4,e.version),l.set(e.headerArray,i+6),at(d,i+30,a),at(d,i+32,e.rawComment.length),e.directory&&rt(d,i+38,16),e.zip64?st(d,i+42,E):st(d,i+42,e.offset),l.set(t,i+46),l.set(n,i+46+t.length),l.set(r,i+46+t.length+n.length),l.set(e.rawExtraField,46+t.length+n.length+r.length),l.set(e.rawComment,i+46+t.length+a),i+=46+t.length+a+e.rawComment.length}return o&&(st(d,i,D),ot(d,i+4,BigInt(44)),at(d,i+12,45),at(d,i+14,45),ot(d,i+24,BigInt(s)),ot(d,i+32,BigInt(s)),ot(d,i+40,BigInt(r)),ot(d,i+48,BigInt(a)),st(d,i+56,F),ot(d,i+64,BigInt(a+r)),st(d,i+72,1),s=k,a=E,i+=76),st(d,i,R),at(d,i+8,s),at(d,i+10,s),st(d,i+12,r),st(d,i+16,a),await t.writeUint8Array(l),await t.writeUint8Array(e),t.getData()}}{constructor(e,t){super(e,t,dt)}},e.configure=ct,e.getMimeType=function(){return"application/octet-stream"},e.initShimAsyncCodec=(e,t={})=>({Deflate:m(e.Deflate,t.deflate),Inflate:m(e.Inflate,t.inflate)}),Object.defineProperty(e,"__esModule",{value:!0})}));
